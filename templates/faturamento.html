{% include 'model-header.html' %}
{% include 'links.html' %}

<link rel="stylesheet" href="{{ url_for('static', filename='css/style_listar.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/style_revendas.css') }}">

{% block content %}

<!-- Seção de Cobrança por Volume -->
<div class="card mb-2">
    <div class="card-header section-header d-flex justify-content-between align-items-center" 
         data-bs-toggle="collapse" data-bs-target="#volumeCollapse" 
         aria-expanded="true" aria-controls="volumeCollapse">
        <h5 class="mb-0">Cobrança por Volume</h5>
    </div>

    <div class="collapse show" id="volumeCollapse">
        <div class="card-body">
            <div class="row g-3">
                <div class="col-md-3">
                    <label for="quantidade">Quantidade:</label>
                    <input type="number" id="quantidade" name="quantidade" class="form-control" required>
                </div>
                <div class="col-md-3">
                    <label for="preco_unitario">Preço Unitário (R$):</label>
                    <input type="number" step="0.01" id="preco_unitario" name="preco_unitario" class="form-control" required>
                </div>
                <div class="col-md-3">
                    <label for="desconto_volume">Desconto (%):</label>
                    <input type="number" step="0.01" id="desconto_volume" name="desconto_volume" class="form-control">
                </div>
                <div class="col-md-3 d-flex align-items-center pt-4">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="prorata_volume" name="prorata_volume">
                        <label class="form-check-label" for="prorata_volume">Aplicar pró-rata</label>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>




<script>
    document.addEventListener("DOMContentLoaded", function () {
        fetch('/proximo_codigo_revenda')
            .then(response => response.json())
            .then(data => {
                if (data.proximo_codigo_revenda) {
                    document.getElementById('codigo_revenda').value = data.proximo_codigo_revenda;
                } else {
                    console.warn("Código de revenda não retornado pela API.");
                }
            })
            .catch(error => {
                console.error("Erro ao buscar código de revenda:", error);
            });
    });
</script>


<br><br><br><br><br><br>

{% endblock %}